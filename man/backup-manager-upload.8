.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "BACKUP-MANAGER-UPLOAD 8"
.TH BACKUP-MANAGER-UPLOAD 8 "2007-08-29" "perl v5.8.8" "backup-manager-upload"
.SH "NAME"
backup\-manager\-upload \- Multiprotocol uploader for backup\-manager.
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
backup-manager-upload [options] date 
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBbackup-manager-upload\fR will upload all the archives generated on the given 
date to the specified host with either ftp or scp.
It's also possible to use this program for uploading data to an Amazon S3 account.
Some metadates are available like \*(L"today\*(R" or \*(L"yesterday\*(R".
.SH "REQUIRED ARGS"
.IX Header "REQUIRED ARGS"
.IP "\fB\-\-mode=\fR\fItransfer-mode\fR" 4
.IX Item "--mode=transfer-mode"
Select the transfer mode to use : ftp, scp, or s3.
.IP "\fB\-\-host=\fR\fIhostname1,hostname2,...,hostnameN\fR" 4
.IX Item "--host=hostname1,hostname2,...,hostnameN"
Select a list of remote hosts to connect to.
.IP "\fB\-\-user=\fR\fIusername\fR" 4
.IX Item "--user=username"
Select the user to use for connection.
.SH "OPTIONAL ARGS"
.IX Header "OPTIONAL ARGS"
.IP "\fB\-\-password=\fR\fIpassword\fR" 4
.IX Item "--password=password"
Select the ftp user's password (only needed for ftp transfers).
.IP "\fB\-\-key=\fR\fIpath_to_private_key\fR" 4
.IX Item "--key=path_to_private_key"
Select the ssh private key file to use when opening the ssh session for scp transfer.
Obviously, this is only needed for scp transfer mode.
If you don't specify a key file, the user's default private key will be used.
.IP "\fB\-\-directory=\fR\fIdirectory\fR" 4
.IX Item "--directory=directory"
Select the location on the remote host where files will be uploaded.
Default is /backup/uploads.
.IP "\fB\-\-bucket=\fR\fIbucket\fR" 4
.IX Item "--bucket=bucket"
Sets the bucket name for the Amazon S3 service backup into.
.IP "\fB\-\-root=\fR\fIdirectory\fR" 4
.IX Item "--root=directory"
Select the local directory where files are.
Default is /var/archives
.IP "\fB\-\-gpg\-recipient=\fR\fIgpg-recipient\fR" 4
.IX Item "--gpg-recipient=gpg-recipient"
Select the gpg public key for encryptiong the archives when uploading
with the method ssh\-gpg. This can be a short or long key id or a
descriptive name. The precise syntax is described in the gpg man page.
.IP "\fB\-\-list\fR" 4
.IX Item "--list"
Just list the files to upload.
.IP "\fB\-\-ftp\-purge\fR" 4
.IX Item "--ftp-purge"
Purge the remote directory before uploading files in \s-1FTP\s0 mode.
.IP "\fB\-\-s3\-purge\fR" 4
.IX Item "--s3-purge"
Purge the remote directory before uploading files in \s-1FTP\s0 mode.
.IP "\fB\-\-ssh\-purge\fR" 4
.IX Item "--ssh-purge"
Purge the remote directory before uploading files in \s-1SSH\s0 mode.
.IP "\fB\-\-verbose\fR" 4
.IX Item "--verbose"
Flag to enable verbose mode.
.IP "\fBdate\fR" 4
.IX Item "date"
Date pattern to select some files to upload, can be a valid date (\s-1YYYYMMDD\s0) or 'today' or 'yesterday'.
.SH "ERROR CODES"
.IX Header "ERROR CODES"
If something goes wrong during an upload, backup-manager-upload will exit 
with a non null value. In such a case every error messages are sent to 
\&\s-1STDERR\s0.
.Sp
Here are the possible error codes:
.RS 4
.IP "bad command line (wrong arguments) : 10" 4
.IX Item "bad command line (wrong arguments) : 10"
.PD 0
.IP "\s-1FTP\s0 transfer failure : 20" 4
.IX Item "FTP transfer failure : 20"
.IP "\s-1SCP\s0 transfer failure : 21" 4
.IX Item "SCP transfer failure : 21"
.IP "S3 transfer failure : 22" 4
.IX Item "S3 transfer failure : 22"
.IP "Unknown upload method: 23" 4
.IX Item "Unknown upload method: 23"
.RE
.RS 4
.PD
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbackup\-manager\fR\|(3)
.SH "AUTHORS"
.IX Header "AUTHORS"
Alexis Sukrieh \- main code and design
.Sp
Brad Dixon \- Amazon S3 upload method
.Sp
Jan Metzger \- ssh-gpg upload method
